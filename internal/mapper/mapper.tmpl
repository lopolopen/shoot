{{- $src := firstLower .TypeName -}}
{{- $dest := printf "%s_" (camelCase .DestTypeName) -}}

// Code generated by "{{.CmdLine}}"; DO NOT EDIT.

package {{.PackageName}}

// To{{pascalCase .DestPkgName}} converts receiver to type {{.QualifiedDestTypeName}}
func ({{$src}} *{{.TypeName}}) To{{pascalCase .DestPkgName}}() *{{.QualifiedDestTypeName}} {
    {{$dest}} := new({{.QualifiedDestTypeName}}) {{"\n"}}

    {{- range $s := $.SrcFieldList -}}
    {{- $d := index $.ExactMatchMap $s -}}
    {{- if $d -}}
    {{$dest}}.{{$d}} = {{$src}}.{{$s}}{{"\n"}}
    {{- end -}}

    {{- $type := index $.SrcToDestTypeMap $s -}}
    {{- if $type -}}
    {{$dest}}.{{index $.ConvMatchMap $s}} = {{$type}}({{$src}}.{{$s}}) {{"\n"}}
    {{- end -}}

    {{- $func := index $.SrcToDestFuncMap $s -}}
    {{- if $func -}}
    {{$dest}}.{{index $.MismatchMap $s}} = {{$src}}.{{$func}}({{$src}}.{{$s}}) {{"\n"}}
    {{- end -}}
    {{- end -}}

    {{- if $.WriteMethodName -}}
    {{$src}}.{{$.WriteMethodName}}({{$dest}}) {{"\n"}}
    {{- end -}}

    return {{$dest}}
}

// From{{pascalCase .DestPkgName}} read from type {{.QualifiedDestTypeName}}, then write back to receiver
func ({{$src}} *{{.TypeName}}) From{{pascalCase .DestPkgName}}({{$dest}} *{{.QualifiedDestTypeName}}) *{{.TypeName}} { {{"\n"}}
    {{- range $s := $.SrcFieldList -}}

    {{- $d := index $.ExactMatchMap $s -}}
    {{- if $d -}}
    {{$src}}.{{$s}} = {{$dest}}.{{$d}}{{"\n"}}
    {{- end -}}

    {{- $type := index $.DestToSrcTypeMap $s -}}
    {{- if $type -}}
    {{$src}}.{{$s}} = {{$type}}({{$src}}.{{index $.ConvMatchMap $s}}) {{"\n"}}
    {{- end -}}

    {{- $func := index $.DestToSrcFuncMap $s -}}
    {{- if $func -}}
    {{$src}}.{{$s}} = {{$src}}.{{$func}}({{$dest}}.{{index $.MismatchMap $s}}) {{"\n"}}
    {{- end -}}
    {{- end -}}

    {{- if $.ReadMethodName -}}
    {{$src}}.{{$.ReadMethodName}}({{$.ReadParamPrefix}}{{$dest}}) {{"\n"}}
    {{- end -}}
    return {{$src}}
}

// ShootMap exists solely to fulfill the MapShooter interface contract
func ({{$src}} {{.TypeName}}) ShootMap() { /*noop*/ }
