# shoot        [中文](https://github.com/lopolopen/shoot/blob/main/README.zh-cn.md)
A pack of tools for "go generate".

# Project status:
BETA VERSION. USE WITH CAUTION!

# How to use?

```zsh
Usage: shoot <subcommand> [options]

These are all the sub commands supported as of now:

new [-new] [-opt] [-getset] [-json][-type=<Type> | -file=<GoFile>] [dir] [-s] [-v]

enum [-json] [-text] -[bit] [-json][-type=<Type> | -file=<GoFile>] [dir] [-v]
```

## using go1.23+ (SUGGESTED)

```zsh
go get github.com/lopolopen/shoot@latest
go get -tool github.com/lopolopen/shoot@latest
```

```go
// generate instruction examples

//go:generate go tool shoot new -getset -json -type=YourType

//go:generate go tool shoot new -getset -json -file $GOFILE

//go:generate go tool shoot enum -json -type=YourEnum
```

```zsh
go generate			# run in the current directory
go generate ./...	# recursively run in the current directory and its subdirectories
```

## using go1.23- (at leat 1.18)

```zsh
# installing this tool needs go1.23+
# can be used by go1.23- project after installed
go install github.com/lopolopen/shoot@latest
```

```go
//go:generate shoot new -getset -json -type=YourType

//go:generate shoot new -getset -json -file $GOFILE

//go:generate shoot enum -json -type=YourEnum
```

```zsh
go generate
go generate ./...
```

## generated file example:
```go
// Code generated by "shoot new -getset -type=User"; DO NOT EDIT.

package example

// NewUser constructs a new instance of type User
func NewUser(id int, name string, age int) *User {
	return &User{
		id:   id,
		name: name,
		age:  age,
	}
}

// Id gets the value of field id
func (u *User) Id() int {
	return u.id
}

// Name gets the value of field name
func (u *User) Name() string {
	return u.name
}

// Age gets the value of field age
func (u *User) Age() int {
	return u.age
}

// SetId sets the value of field id
func (u *User) SetId(id_ int) {
	u.id = id_
}

// SetName sets the value of field name
func (u *User) SetName(name_ string) {
	u.name = name_
}

// SetAge sets the value of field age
func (u *User) SetAge(age_ int) {
	u.age = age_
}
```

## more samples:
[samples](https://github.com/lopolopen/shoot/tree/main/samples)

# TODO:
- [x] shoot new -getset -type=YourType
- [x] shoot new: field instruction like get;default=1
- [x] shoot new -opt|option -type=YourType
- [x] shoot new -json -type=YourType
- [x] shoot new: embed struct
- [x] shoot new: external package
- [x] shoot new -file=YourFile
- [ ] shoot new: type instruction like ignore
- [x] shoot new: -separate
- [x] shoot enum -bit|bitwise -type=YourEnum
- [x] shoot enum -json -type=YourEnum
- [ ] refactor: duplicated code

# Inspiring projects
* [stringer](https://pkg.go.dev/golang.org/x/tools/cmd/stringer)
* [enumer](https://github.com/dmarkham/enumer)
* [genapi](https://github.com/lexcao/genapi)
* [Refit](https://github.com/reactiveui/refit)